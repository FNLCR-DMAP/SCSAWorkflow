{
  "rid": "ri.vector.main.template.344dc026-20f6-4c0a-be43-0e820738e7a7",
  "title": "Select Values [SPAC] [DMAP]",
  "description": "Selects the rows containing the label(s) of interest in a given annotation from the dataset.\\\nPlease refer to [DUET Documentation](https://nidap.nih.gov/shares/links/cakelm4m3c2xu), [GitHub Documentation](https://fnlcr-dmap.github.io/SCSAWorkflow/spac.html#spac.data_utils.select_values)",
  "createdBy": "473c74f1-6764-4d6c-87e8-4a56c2b2f5a0",
  "createdAt": "2024-07-30T19:44:12.079696197Z",
  "commitMessage": "spac v0.7.0",
  "status": "RELEASED",
  "inputDatasets": [
    {
      "key": "Upstream_Dataset",
      "displayName": "Upstream Analysis",
      "description": "Link to prior processed analysis in the analysis.",
      "paramGroup": null,
      "anchorDataset": null,
      "dataType": "PANDAS_DATAFRAME",
      "tags": []
    }
  ],
  "parameters": [
    {
      "key": "Labels_of_Interest",
      "displayName": "Label(s) of Interest",
      "description": "Label(s) of interest to include from the selected annotation.",
      "paramType": "LIST",
      "paramGroup": null,
      "paramValues": null,
      "defaultValue": "[\"\"]",
      "condition": null,
      "content": null,
      "objectPropertyReference": null
    }
  ],
  "columns": [
    {
      "key": "Annotation_of_Interest",
      "displayName": "Annotation of Interest",
      "description": "Annotation of interest to select values from.",
      "paramGroup": null,
      "sourceDataset": "Upstream_Dataset",
      "defaultValue": null,
      "columnType": "ALL",
      "isMulti": null
    }
  ],
  "orderedMustacheKeys": [
    "Upstream_Dataset",
    "Annotation_of_Interest",
    "Label_s_of_Interest"
  ],
  "contents": {
    "type": "code",
    "code": {
      "codeLanguage": "PYTHON",
      "codeTemplate": "def select_values({{{Upstream_Dataset}}}):\n    ## --------- ##\n    ## Libraries ##\n    ## --------- ##\n\n    from spac.data_utils import select_values\n    import warnings\n\n    ## -------------------------------- ##\n    ## User-Defined Template Parameters ##\n    ## -------------------------------- ##\n\n    input_dataset = {{{Upstream_Dataset}}}\n    observation = \"{{{Annotation_of_Interest}}}\"\n    values = {{{Label_s_of_Interest}}}\n    \n    ##--------------- ##\n    ## Error Messages ##\n    ## -------------- ##\n\n    ## --------- ##\n    ## Functions ##\n    ## --------- ##\n\n\n    ## --------------- ##\n    ## Main Code Block ##\n    ## --------------- ##\n    ################################\n    with warnings.catch_warnings(record=True) as caught_warnings:\n        filtered_dataset = select_values(\n            data=input_dataset,\n            annotation=observation,\n            values=values\n            )\n        if caught_warnings is not None:\n            for warning in caught_warnings:\n                raise ValueError(warning.message)\n    \n    print(filtered_dataset.info())\n\n    ## --------------- ##\n    ## Save Item Block ##\n    ## --------------- ##\n    return(filtered_dataset)",
      "shouldPersist": true
    }
  },
  "version": 18,
  "externalId": null,
  "canEditTemplate": true,
  "path": "/NIDAP/NCI-Wide Analysis & Visualization Resources/SPAC/SPAC Templates/Select Values [SPAC] [DMAP]",
  "tags": [
    {
      "rid": "ri.compass.main.tag.02094a7d-d869-4dff-bc31-78ad8676d1ad",
      "name": "Code Templates:DMAP"
    },
    {
      "rid": "ri.compass.main.tag.ebb2ab0f-e354-4bd4-9f3a-e78dc8452986",
      "name": "Code Templates:SPAC"
    }
  ],
  "favorite": false,
  "namedCollections": [],
  "isDefault": true,
  "condaDependencies": [
    "python"
  ],
  "outputDatasetName": "select_values",
  "outputs": {
    "dataframe": {"type": "file", "name": "dataframe.csv"}
  }
}