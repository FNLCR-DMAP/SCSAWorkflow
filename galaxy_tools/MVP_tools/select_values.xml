<?xml version="1.0" ?>
<tool id="spac_select_values" name="Select Values [SPAC] [DMAP]" version="2.0.0" profile="24.2">
    <description>Selects the rows containing the label(s) of interest in a given annotation from the dataset.\
Please refer to DUET Documentation, GitHub Documentation</description>
    <requirements>
        <container type="docker">spac:mvp</container>
    </requirements>
    <configfiles>
        <inputs name="params_json" filename="galaxy_params.json" data_style="paths"/>
    </configfiles>
    <command detect_errors="exit_code"><![CDATA[

echo '{"dataframe": {"type": "file", "name": "dataframe.csv"}}' > outputs_config.json && python '$__tool_directory__/format_values.py' 'galaxy_params.json' 'cleaned_params.json' --list-values Labels_of_Interest --inject-outputs --outputs-config outputs_config.json && python '$__tool_directory__/select_values_template.py' 'cleaned_params.json'

]]></command>
    <inputs>
        <param name="Upstream_Dataset" type="data" format="tabular,csv,tsv,txt" label="Upstream Analysis" help="Link to prior processed analysis in the analysis."/>
        <param name="Annotation_of_Interest" type="text" label="Annotation of Interest" help="Annotation of interest to select values from."/>
    </inputs>
    <outputs>
        <data name="params_json_debug" format="json" from_work_dir="galaxy_params.json" label="${tool.name} on ${on_string}: Raw Parameters"/>
        <data name="cleaned_params_debug" format="json" from_work_dir="cleaned_params.json" label="${tool.name} on ${on_string}: Cleaned Parameters"/>
        <data name="dataframe" format="csv" from_work_dir="dataframe.csv" label="${tool.name} on ${on_string}: Dataframe"/>
    </outputs>
    <help><![CDATA[

**Select Values [SPAC] [DMAP]**
Selects the rows containing the label(s) of interest in a given annotation from the dataset.\
Please refer to DUET Documentation, GitHub Documentation
**Outputs:**
- dataframe: file (dataframe.csv)

]]></help>
    <citations>
        <citation type="doi">10.1038/s41586-019-1876-x</citation>
    </citations>
</tool>