{
  "rid": "ri.vector.main.template.86bc5da3-483d-47ab-b6b0-d6d13a47bcfe",
  "title": "Binary to Categorical Annotation [SPAC] [DMAP]",
  "description": "Convert mutually exclusive binary annotation columns to one new categorical annotation column.\\\nPlease refer to [DUET Documentation](https://nidap.nih.gov/workspace/notepad/view/ri.notepad.main.notepad.ffc53d85-6d81-411b-8b96-ceb55ca86121), [GitHub Documentation](https://fnlcr-dmap.github.io/SCSAWorkflow/spac.html#spac.data_utils.bin2cat) for further information.",
  "createdBy": "473c74f1-6764-4d6c-87e8-4a56c2b2f5a0",
  "createdAt": "2024-07-30T19:57:00.307581196Z",
  "commitMessage": "spac v0.7.0",
  "status": "RELEASED",
  "inputDatasets": [
    {
      "key": "Upstream_Dataset",
      "displayName": "Upstream Dataset",
      "description": "Link to prior processed dataset in the analysis.",
      "paramGroup": null,
      "anchorDataset": null,
      "dataType": "PANDAS_DATAFRAME",
      "tags": []
    }
  ],
  "parameters": [
    {
      "key": "New_Annotation_Name",
      "displayName": "New Annotation Name",
      "description": "Name of the column to create with the new annotation.",
      "paramType": "STRING",
      "paramGroup": null,
      "paramValues": null,
      "defaultValue": "cell_labels",
      "condition": null,
      "content": null,
      "objectPropertyReference": null
    }
  ],
  "columns": [
    {
      "key": "Binary_Annotation_Columns",
      "displayName": "Binary Annotation Columns",
      "description": "Mutually exclusive binary annotation columns to convert to categorical values.",
      "paramGroup": null,
      "sourceDataset": "Upstream_Dataset",
      "defaultValue": null,
      "columnType": "ALL",
      "isMulti": true
    }
  ],
  "orderedMustacheKeys": [
    "Upstream_Dataset",
    "Binary_Annotation_Columns",
    "New_Annotation_Name"
  ],
  "contents": {
    "type": "code",
    "code": {
      "codeLanguage": "PYTHON",
      "codeTemplate": "def binary_to_categorical_annotation({{{Upstream_Dataset}}}):\n    ## --------- ##\n    ## Libraries ##\n    ## --------- ##\n    from spac.data_utils import bin2cat\n    from spac.utils import check_column_name\n\n    ## -------------------------------- ##\n    ## User-Defined Template Parameters ##\n    ## -------------------------------- ##\n    \n    input_dataset = {{{Upstream_Dataset}}}\n    one_hot_annotations = {{{Binary_Annotation_Columns}}}\n    new_annotation = \"{{{New_Annotation_Name}}}\"\n\n    ##--------------- ##\n    ## Error Messages ##\n    ## -------------- ##\n\n    check_column_name(new_annotation,\"New Annotation Name\")\n\n    ## --------- ##\n    ## Functions ##\n    ## --------- ##\n\n\n    ## --------------- ##\n    ## Main Code Block ##\n    ## --------------- ##\n    ################################\n    converted_df = bin2cat(\n        data=input_dataset,\n        one_hot_annotations=one_hot_annotations,\n        new_annotation=new_annotation\n        )\n\n    print(converted_df.info())\n    ## --------------- ##\n    ## Save Item Block ##\n    ## --------------- ##\n\n    return(converted_df)\n\n    \n    ",
      "shouldPersist": true
    }
  },
  "version": 12,
  "externalId": null,
  "canEditTemplate": true,
  "path": "/NIDAP/NCI-Wide Analysis & Visualization Resources/SPAC/SPAC Templates/Binary to Categorical Annotation [SPAC] [DMAP]",
  "tags": [
    {
      "rid": "ri.compass.main.tag.02094a7d-d869-4dff-bc31-78ad8676d1ad",
      "name": "Code Templates:DMAP"
    },
    {
      "rid": "ri.compass.main.tag.ebb2ab0f-e354-4bd4-9f3a-e78dc8452986",
      "name": "Code Templates:SPAC"
    }
  ],
  "favorite": false,
  "namedCollections": [],
  "isDefault": true,
  "condaDependencies": [
    "python=3.6"
  ],
  "outputDatasetName": "binary_to_categorical_annotation",
  "outputs": {
    "dataframe": {"type": "file", "name": "dataframe.csv"}
  }
}